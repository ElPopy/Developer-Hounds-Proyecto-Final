<template>
  <lightning-card>
    <h1 slot="title" class="slds-text-heading_medium">
      Resources allocation tabla
    </h1>
    <lightning-layout multiple-rows horizontal-align="center">
      <template if:false={isLoading}>
        <template for:each={positions} for:item="position">
          <lightning-layout-item
            padding="around-small"
            size="12"
            key={position.projectLineItemId}
          >
            <c-position-entry
              onallocationchange={handleAllocationChange}
              position={position}
              project-start={projectStart}
              project-end={projectEnd}
            ></c-position-entry>
          </lightning-layout-item>
        </template>
      </template>

      <template if:true={isLoading}>
        <lightning-layout-item padding="around-small" size="12">
          <lightning-spinner alternative-text="Loading"></lightning-spinner>
        </lightning-layout-item>
      </template>

      <lightning-layout-item
        class="slds-grid slds-grid_align-end"
        padding="around-small"
        size="12"
      >
        <lightning-button
          variant="brand"
          label="Allocate"
          title="Allocate Resourses"
          onclick={handleClick}
          class="slds-m-left_x-small slds-col"
          disabled={isButtonDesibled}
        ></lightning-button>
      </lightning-layout-item>
    </lightning-layout>
  </lightning-card>
</template>